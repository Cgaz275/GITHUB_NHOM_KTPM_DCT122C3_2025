# EverShop - Standardized CI/CD & Development Setup

A modern, TypeScript-first eCommerce platform built with GraphQL and React. This folder contains the standardized development and deployment setup using NX workspace management and Vercel deployment.

[![CI Pipeline](https://github.com/Cgaz275/NHOM_KTPM_DCT122C3_2025/actions/workflows/ci.yml/badge.svg)](https://github.com/Cgaz275/NHOM_KTPM_DCT122C3_2025/actions)
[![License: GPLv3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)

## ğŸš€ Quick Start

### Prerequisites
- Node.js 20.x or 22.x
- npm 9.x
- PostgreSQL 16 (or Docker)

### Setup in 5 Minutes

```bash
# 1. Clone and navigate
cd DOAN/EVERSHOP/evershop

# 2. Install dependencies
npm install

# 3. Setup database
npm run setup

# 4. Start development
npm run dev
# Open http://localhost:3000
```

**Full setup guide**: See [SETUP.md](./SETUP.md)

---

## ğŸ“š Documentation

| Document | Purpose |
|----------|---------|
| [**SETUP.md**](./SETUP.md) | Step-by-step local environment setup |
| [**WORKFLOW.md**](./WORKFLOW.md) | Development workflow, branching strategy, deployment process |
| [**CONTRIBUTING.md**](./CONTRIBUTING.md) | Code standards, testing, commit guidelines |
| [**DEPLOYMENT.md**](./DEPLOYMENT.md) | Vercel deployment, CI/CD troubleshooting, monitoring |

---

## ğŸ—ï¸ Project Structure

```
DOAN/EVERSHOP/evershop/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ evershop/              # Main application
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ modules/       # Feature modules
â”‚   â”‚   â”‚   â”œâ”€â”€ bin/           # CLI scripts
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ dist/              # Compiled output
â”‚   â”œâ”€â”€ postgres-query-builder/ # Database utilities
â”‚   â””â”€â”€ create-evershop-app/    # CLI scaffolding
â”œâ”€â”€ extensions/                # Feature extensions
â”œâ”€â”€ themes/                    # UI themes
â”œâ”€â”€ public/                    # Static assets
â”œâ”€â”€ config/                    # Configuration
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/             # CI/CD pipelines
â”œâ”€â”€ nx.json                    # NX workspace config
â”œâ”€â”€ vercel.json                # Vercel deployment config
â””â”€â”€ package.json              # Root dependencies
```

---

## ğŸ”„ Development Workflow

### Branch Strategy

```
main (production-ready)
â”œâ”€â”€ modules/auth         (feature branches)
â”œâ”€â”€ modules/catalog
â”œâ”€â”€ modules/checkout
â”œâ”€â”€ modules/cms
â”œâ”€â”€ modules/customer
â”œâ”€â”€ modules/oms
â””â”€â”€ feature/task-name    (short-lived branches)
```

### Development Process

```
Create Branch â†’ Make Changes â†’ Run Tests â†’ Push â†’ Create PR
    â†“            â†“               â†“          â†“      â†“
modules/*  Implement         npm test   GitHub  Auto-deploy
           feature           + lint              preview
                                 â†“
                         Code Review & Approve
                                 â†“
                           Merge to main
                                 â†“
                         Auto-deploy production
```

**Detailed workflow**: See [WORKFLOW.md](./WORKFLOW.md)

---

## ğŸ§ª Testing & Quality

### Run Locally

```bash
# Tests
npm run test              # Run all tests
npm run test -- --watch   # Watch mode
npm run test -- --coverage

# Linting
npm run lint              # Check code style
npm run lint -- --fix     # Auto-fix issues

# Build
npm run build             # Production build
npm run build-fast        # Fast build (no minify)

# Compilation
npm run compile           # Compile TypeScript
npm run compile:db        # Compile database utilities
```

### CI/CD Pipeline

Automatically runs on every PR:
- âœ… TypeScript compilation
- âœ… ESLint linting
- âœ… Jest tests (80%+ coverage)
- âœ… Production build
- âœ… Preview deployment

**All checks must pass before merge to main.**

---

## ğŸ“¦ NX Workspace

### View Project Dependencies

```bash
# Start NX graph viewer
npm run nx -- graph
# Opens http://localhost:4211
```

### Build Affected Packages

```bash
# Build only changed packages
npm run nx -- affected:build

# Test only changed packages
npm run nx -- affected:test

# Lint only changed packages
npm run nx -- affected:lint
```

### NX Commands

```bash
npm run nx -- list                    # List all projects
npm run nx -- run evershop:build      # Build specific package
npm run nx -- reset                   # Clear NX cache
npm run nx -- graph --file=graph.html # Save graph as HTML
```

---

## ğŸš¢ Deployment

### Preview Deployment
- **Triggered**: On every Pull Request
- **Environment**: Staging/Preview
- **URL**: Auto-generated by Vercel
- **View**: Comment in PR with preview link

### Production Deployment
- **Triggered**: Merge to `main` branch
- **Environment**: Production
- **URL**: `https://your-domain.vercel.app`
- **Requirement**: All tests must pass

### Vercel Setup

1. Connect GitHub repository to Vercel
2. Set root directory: `DOAN/EVERSHOP/evershop`
3. Add environment variables in Vercel dashboard
4. Configure GitHub Actions secrets:
   - `VERCEL_TOKEN`
   - `VERCEL_ORG_ID`
   - `VERCEL_PROJECT_ID`

**Full deployment guide**: See [DEPLOYMENT.md](./DEPLOYMENT.md)

---

## ğŸ”‘ Environment Variables

Required environment variables for local development:

```env
# Database
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=evershop

# Application
NODE_ENV=development
APP_URL=http://localhost:3000
```

**Template**: See [.env.example](./.env.example)

---

## ğŸ“‹ Common Commands

### Development
```bash
npm run dev                # Start dev server (localhost:3000)
npm run build              # Build for production
npm start                  # Run production build
npm run start:debug        # Debug production build
```

### Code Quality
```bash
npm run lint               # Check code style
npm run lint -- --fix      # Auto-fix code
npm run test               # Run tests
npm run test -- --watch    # Watch mode
npm run test -- --coverage # Coverage report
```

### Workspace
```bash
npm run compile            # Compile TypeScript
npm run compile:db         # Compile database utils
npm run nx -- graph        # View dependency graph
npm run nx -- reset        # Clear cache
```

---

## ğŸ¤ Contributing

Follow our development standards and workflow:

1. **Create feature branch** from `main`
2. **Make changes** in your module
3. **Run tests locally**: `npm run test`
4. **Push and create PR** with clear description
5. **Wait for code review** and CI/CD checks
6. **Address feedback** if any
7. **Merge** once approved

**Full contribution guide**: See [CONTRIBUTING.md](./CONTRIBUTING.md)

### Code Standards
- TypeScript for all code
- ESLint + Prettier for formatting
- >80% test coverage
- Conventional commits
- Type-safe code (no `any`)

---

## ğŸ› Troubleshooting

### Local Setup Issues
â†’ See [SETUP.md - Troubleshooting](./SETUP.md#troubleshooting)

### Development Issues
â†’ See [WORKFLOW.md - Troubleshooting](./WORKFLOW.md#troubleshooting)

### Deployment Issues
â†’ See [DEPLOYMENT.md - Troubleshooting](./DEPLOYMENT.md#troubleshooting)

### Common Solutions

**Port 3000 already in use**:
```bash
lsof -i :3000  # Find process
kill -9 <PID>  # Kill it
# Or use different port: PORT=3001 npm run dev
```

**Module not found**:
```bash
npm install    # Reinstall dependencies
npm run compile # Recompile
npm run nx -- reset  # Clear NX cache
```

**Tests failing**:
```bash
npm run test -- --clearCache  # Clear Jest cache
npm run test -- --watch       # Debug in watch mode
```

---

## ğŸ“Š Git Workflow

### Branch Naming
```
modules/<module-name>     # Feature branches
feature/<specific-task>   # Short-lived branches
```

### Commit Messages
Follow conventional commits:
```
type(scope): subject

- Detailed explanation
- of what changed

Closes #123
```

**Examples**:
- `feat(auth): add two-factor authentication`
- `fix(catalog): prevent duplicate imports`
- `docs: update deployment guide`

---

## ğŸ” Security

- Never commit secrets or credentials
- Use `.env` for sensitive data (add to `.gitignore`)
- Validate all user input
- Use environment variables in Vercel dashboard
- Run `npm audit` regularly
- Update dependencies: `npm update`

```bash
# Check for vulnerabilities
npm audit

# Fix automatically
npm audit fix

# Update dependencies
npm update
```

---

## ğŸ“ˆ Performance

### Monitor Performance
```bash
npm run build              # Check build size
npm run test -- --coverage # Check test coverage
npm run nx -- graph        # Visualize dependencies
```

### Optimization Tips
- Use NX caching effectively
- Lazy load routes and components
- Optimize images and assets
- Profile before optimizing
- Run `npm audit` for outdated packages

---

## ğŸ†˜ Getting Help

- **Setup questions**: See [SETUP.md](./SETUP.md)
- **Workflow questions**: See [WORKFLOW.md](./WORKFLOW.md)
- **Code contribution**: See [CONTRIBUTING.md](./CONTRIBUTING.md)
- **Deployment help**: See [DEPLOYMENT.md](./DEPLOYMENT.md)
- **GitHub Issues**: Post bugs and feature requests

---

## ğŸ“ Team

- **Team Lead**: ChÃ¢u Gia Anh (3122411002)
- **Members**: ÄÃ o Thá»‹ Thanh TÃ¢m, DÆ°Æ¡ng LÃª KhÃ¡nh
- **Course**: Software Testing (DCT122C3)
- **University**: Saigon University

---

## ğŸ“„ License

Licensed under GNU GENERAL PUBLIC LICENSE 3.0

See [LICENSE](./LICENSE) file for details.

---

## ğŸ”— Resources

- **EverShop Official**: https://evershop.io
- **EverShop Docs**: https://evershop.io/docs/
- **GitHub Repository**: https://github.com/evershopcommerce/evershop
- **TypeScript Docs**: https://www.typescriptlang.org/
- **NX Documentation**: https://nx.dev/
- **React Documentation**: https://react.dev/

---

## ğŸ¯ Next Steps

1. âœ… Read this README
2. âœ… Follow [SETUP.md](./SETUP.md) for local setup
3. âœ… Read [WORKFLOW.md](./WORKFLOW.md) for development process
4. âœ… Create a feature branch and start coding!

**Happy developing! ğŸš€**

---

<div align="center">
  Made with â¤ï¸ for Software Testing Course
  <br/>
  <strong>DOAN/EVERSHOP/evershop</strong>
  <br/>
  Last Updated: 2025
</div>
